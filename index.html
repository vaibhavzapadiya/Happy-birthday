import { Component } from '@angular/core';

@Component({
  selector: 'app-leave-application',
  templateUrl: './leave-application.component.html',
  styleUrls: ['./leave-application.component.css']
})
export class LeaveApplicationComponent {
  // Form Data Model
  formData = {
    employeeName: '',
    leaveType: '',
    startDate: '',
    endDate: '',
    leaveReason: ''
  };

  leaveBalance = ''; // Leave Balance Display
  leaveApprovalStatus = ''; // Leave Approval Status Display
  leaveTypes = {
    'Paid Leave': 12,
    'Sick Leave': 8,
    'Casual Leave': 5
  };

  updateLeaveBalance() {
    const type = this.formData.leaveType;
    this.leaveBalance = type ? `${this.leaveTypes[type]} days remaining` : '';
  }

  calculateLeaveDuration() {
    const start = new Date(this.formData.startDate);
    const end = new Date(this.formData.endDate);
    const duration = (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24) + 1;

    if (duration <= 0) {
      this.leaveApprovalStatus = 'Invalid date range.';
      return;
    }

    if (this.leaveTypes[this.formData.leaveType] < duration) {
      this.leaveApprovalStatus = `Insufficient ${this.formData.leaveType} balance.`;
    } else {
      this.leaveApprovalStatus = `Leave approved for ${duration} days.`;
    }
  }

  onSubmit(form: any) {
    if (form.valid) {
      console.log('Leave application submitted:', this.formData);
      alert('Leave application submitted successfully!');
    }
  }
}